var TableAcrossWord,TableDownWord,CurrentWord,PrevWordHorizontal,x,y,i,j,CrosswordFinished,Initialized,BadChars="`~!@^*()_={[}]|:;\"',<.>/?",WordLength=[],AnswerHash=[];for(i=0;i<Word.length;i++){var a=Word[i].length,b=HashWord(Word[i]);WordLength.push(a),AnswerHash.push(b)}if(null!=document.getElementById("waitmessage")){for(x=0,document.getElementById("waitmessage").innerHTML="Memuat...",CurrentWord=-1,PrevWordHorizontal=!1,TableAcrossWord=Array(CrosswordWidth);x<CrosswordWidth;x++)TableAcrossWord[x]=Array(CrosswordHeight);for(x=0,TableDownWord=Array(CrosswordWidth);x<CrosswordWidth;x++)TableDownWord[x]=Array(CrosswordHeight);for(y=0;y<CrosswordHeight;y++)for(x=0;x<CrosswordWidth;x++)TableAcrossWord[x][y]=-1,TableDownWord[x][y]=-1;for(i=0;i<=LastHorizontalWord;i++)for(x=WordX[i],y=WordY[i],j=0;j<WordLength[i];j++)TableAcrossWord[x+j][y]=i;for(i=LastHorizontalWord+1;i<Words;i++)for(x=WordX[i],y=WordY[i],j=0;j<WordLength[i];j++)TableDownWord[x][y+j]=i;for(y=0;y<CrosswordHeight;y++){for(document.writeln("<tr>"),x=0;x<CrosswordWidth;x++)0<=TableAcrossWord[x][y]||0<=TableDownWord[x][y]?document.write('<td id="c'+PadNumber(x)+PadNumber(y)+'" class="ecw-box ecw-boxnormal_unsel" onclick="SelectThisWord(event);">&nbsp;</td>'):document.write("<td></td>");document.writeln("</tr>")}Initialized=!0,document.getElementById("waitmessage").style.display="none",document.getElementById("crossword").style.display="table"}function WordEntryKeyPress(a){CrosswordFinished||0<=CurrentWord&&13==a.keyCode&&OKClick()}function BeginCrossword(){Initialized&&(document.getElementById("welcomemessage").style.display="",document.getElementById("checkbutton").style.display="")}function ContainsBadChars(b){for(var a=0;a<b.length;a++)if(0<=BadChars.indexOf(b.charAt(a)))return!0;return!1}function PadNumber(a){return 10>a?"00"+a:100>a?"0"+a:""+a}function CellAt(a,b){return document.getElementById("c"+PadNumber(a)+PadNumber(b))}function DeselectCurrentWord(){0>CurrentWord||(document.getElementById("answerbox").style.display="none",ChangeCurrentWordSelectedStyle(!1),CurrentWord=-1)}function ChangeWordStyle(a,b){if(!(0>a)){var c=WordX[a],d=WordY[a];if(a<=LastHorizontalWord)for(i=0;i<WordLength[a];i++)CellAt(c+i,d).className=b;else for(i=0;i<WordLength[a];i++)CellAt(c,d+i).className=b}}function ChangeCurrentWordSelectedStyle(a){if(!(0>CurrentWord)){var b=WordX[CurrentWord],c=WordY[CurrentWord];if(CurrentWord<=LastHorizontalWord)for(i=0;i<WordLength[CurrentWord];i++)CellAt(b+i,c).className=CellAt(b+i,c).className.replace(a?"_unsel":"_sel",a?"_sel":"_unsel");else for(i=0;i<WordLength[CurrentWord];i++)CellAt(b,c+i).className=CellAt(b,c+i).className.replace(a?"_unsel":"_sel",a?"_sel":"_unsel")}}function SelectThisWord(a){if(!CrosswordFinished){document.getElementById("welcomemessage").style.display="none",0<=CurrentWord&&OKClick(),DeselectCurrentWord(),a=parseInt((e=a.srcElement?a.srcElement:a.target).id.substring(1,4),10),e=parseInt(e.id.substring(4,7),10),0<=TableAcrossWord[a][e]&&0<=TableDownWord[a][e]?CurrentWord=PrevWordHorizontal?TableDownWord[a][e]:TableAcrossWord[a][e]:0<=TableAcrossWord[a][e]?CurrentWord=TableAcrossWord[a][e]:0<=TableDownWord[a][e]&&(CurrentWord=TableDownWord[a][e]),PrevWordHorizontal=CurrentWord<=LastHorizontalWord,ChangeCurrentWordSelectedStyle(!0),a=WordX[CurrentWord],e=WordY[CurrentWord],d="";var e,b,d,c,f=0;for(b=0;b<WordLength[CurrentWord];b++)null!=(c=CurrentWord<=LastHorizontalWord?CellAt(a+b,e):CellAt(a,e+b)).innerHTML&&0<c.innerHTML.length&&" "!=c.innerHTML&&"&nbsp;"!=c.innerHTML.toLowerCase()?(d+=c.innerHTML.toUpperCase(),f++):d+="&bull;";document.getElementById("wordlabel").innerHTML=d,document.getElementById("wordinfo").innerHTML=(CurrentWord<=LastHorizontalWord?"Mendatar, ":"Menurun, ")+WordLength[CurrentWord]+" huruf.",document.getElementById("wordclue").innerHTML=Clue[CurrentWord],document.getElementById("worderror").style.display="none",document.getElementById("cheatbutton").style.display=(Word.length,""),f==WordLength[CurrentWord]?document.getElementById("wordentry").value=d:document.getElementById("wordentry").value="",document.getElementById("answerbox").style.display="block";try{document.getElementById("wordentry").focus(),document.getElementById("wordentry").select()}catch(g){}}}function OKClick(){var b,c,d,a;if(!CrosswordFinished&&!document.getElementById("okbutton").disabled){if(0==(b=document.getElementById("wordentry").value.toUpperCase()).length)DeselectCurrentWord();else if(ContainsBadChars(b))document.getElementById("worderror").innerHTML="Ada karakter yang tidak dapat diterima.",document.getElementById("worderror").style.display="block";else if(b.length<WordLength[CurrentWord])document.getElementById("worderror").innerHTML="Hurufnya kurang.",document.getElementById("worderror").style.display="block";else if(b.length>WordLength[CurrentWord])document.getElementById("worderror").innerHTML="Hurufnya kelebihan.",document.getElementById("worderror").style.display="block";else{for(a=0,c=WordX[CurrentWord],d=WordY[CurrentWord];a<b.length;a++)CellAt(c+(CurrentWord<=LastHorizontalWord?a:0),d+(CurrentWord>LastHorizontalWord?a:0)).innerHTML=b.substring(a,a+1);DeselectCurrentWord()}}}function CheckClick(){var a,b,e,f,c=0,d=0;if(!CrosswordFinished){for(DeselectCurrentWord(),b=0;b<CrosswordHeight;b++)for(a=0;a<CrosswordWidth;a++)(0<=TableAcrossWord[a][b]||0<=TableDownWord[a][b])&&"ecw-box ecw-boxerror_unsel"==(f=CellAt(a,b)).className&&(f.className="ecw-box ecw-boxnormal_unsel");for(a=0;a<Words;a++){for(b=0,e="";b<WordLength[a];b++)if(0<(f=a<=LastHorizontalWord?CellAt(WordX[a]+b,WordY[a]):CellAt(WordX[a],WordY[a]+b)).innerHTML.length&&"&nbsp;"!=f.innerHTML.toLowerCase())e+=f.innerHTML.toUpperCase();else{e="",d++;break}HashWord(e)!=AnswerHash[a]&&0<e.length&&(c++,ChangeWordStyle(a,"ecw-box ecw-boxerror_unsel"))}OnlyCheckOnce&&(CrosswordFinished=!0,document.getElementById("checkbutton").style.display="none"),0<c&&0<d?document.getElementById("welcomemessage").innerHTML=c+" jawaban salah dan "+d+" soal belum dijawab":0<c?document.getElementById("welcomemessage").innerHTML=c+" jawaban salah":0<d&&(document.getElementById("welcomemessage").innerHTML="Jawaban tidak ada yang salah, tapi "+d+" soal belum dijawab"),0<c+d?document.getElementById("welcomemessage").style.display="":(CrosswordFinished=!0,document.getElementById("congratulations").style.display="block",document.getElementById("welcomemessage").style.display="none")}}function CheatClick(){if(!CrosswordFinished){var a=CurrentWord;document.getElementById("wordentry").value=Word[CurrentWord],OKClick(),ChangeWordStyle(a,"ecw-box ecw-boxcheated_unsel")}}function HashWord(b){var a,d=719*b.charCodeAt(0)%1138,c=837;for(a=1;a<=b.length;a++)c=(c*a+5+(b.charCodeAt(a-1)-64)*d)%98503;return c}function TutupDownload(){document.getElementById("lyrpdr").style.display="none",document.getElementById("ttsdload").style.display="none"}function BukaDownload(){document.getElementById("lyrpdr").style.display="block",document.getElementById("ttsdload").style.display="block"}